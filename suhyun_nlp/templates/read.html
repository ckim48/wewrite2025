{% extends 'header.html' %}
{% block read %}
<title>WeRead - Discover Stories</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    background-color: #f4f6f9;
    font-family: 'Segoe UI', sans-serif;
  }
.card-genre {
  display: inline-block;
  font-size: 0.8rem;
  font-weight: 600;
  background-color: rgba(168, 161, 156, 0.1);
  color: black;
  padding: 4px 10px;
  border-radius: 12px;
  margin-top: 8px;
}

  .supermt-5 {
    margin-top: 100px;
  }

  h4 {
    font-weight: 800;
    font-size: 1.5rem;
    color: #1e1e1e;
    margin-bottom: 1.2rem;
    padding-left: 6px;
    border-left: 4px solid #3aa17e;
  }

  .genre-card {
    border-radius: 16px;
    padding: 20px;
    height: 180px;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.07);
    overflow: hidden;
    color: #1e1e1e;
  }

  .genre-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.12);
  }

  .card-title {
    font-size: 1.15rem;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .card-author {
    font-size: 0.95rem;
    color: #444;
    opacity: 0.9;
  }

  .card-date {
    font-size: 0.85rem;
    color: #555;
    margin-top: 10px;
    font-style: italic;
  }

  /* Genre gradients */
  .genre-fantasy {
    background: linear-gradient(135deg, #ede7f6, #d1c4e9);
  }
  .genre-romance {
    background: linear-gradient(135deg, #fff0f6, #ffc1e3);
  }
  .genre-science-fiction {
    background: linear-gradient(135deg, #e3f2fd, #90caf9);
  }
  .genre-historical-fiction {
    background: linear-gradient(135deg, #fef9e7, #ffe082);
  }
  .genre-mystery {
    background: linear-gradient(135deg, #eceff1, #cfd8dc);
  }
  .genre-fiction {
    background: linear-gradient(135deg, #e8f5e9, #a5d6a7);
  }

  a {
    text-decoration: none;
  }

  #searchInput {
    border-radius: 25px;
    padding: 12px 20px;
    font-size: 1rem;
    border: 1px solid #ccc;
    margin-top: 12px;
    margin-bottom: 24px;
  }

  #searchInput:focus {
    outline: none;
    border-color: #3aa17e;
  }
</style>

<div class="container supermt-5">

  <!-- Recommendations -->
  <h4 class="mt-3">Recommended for You</h4>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4">
    {% for story, author, pk, genre, title in recommended_story_tuple_list %}
    <div class="col">
      <a href="/detail/{{ pk }}/">
        <div class="genre-card genre-{{ genre.name|lower|slugify }}">
          <div class="card-title">{{ title|title }}</div>
<div class="card-author">by {{ author }}</div>
          <div class="card-genre">Genre: {{ genre.name }}</div>

          <div class="card-date">{{ story.started_date|date:"M d, Y" }}</div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>

  <!-- Read Now -->
  <h4 class="mt-5">Read Now</h4>
  <div class="input-group">
    <input type="text" id="searchInput" class="form-control" placeholder="Search by title or author...">
  </div>

  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4 mb-5" id="readNowList">
    {% for story, author, pk, genre, title in story_tuple_list %}
    <div class="col">
      <a href="/detail/{{ pk }}/">
        <div class="genre-card genre-{{ genre.name|lower|slugify }}">
          <div class="card-title">{{ title|title }}</div>
<div class="card-author">by {{ author }}</div>
                      <div class="card-genre">Genre: {{ genre.name }}</div>

          <div class="card-date">{{ story.started_date|date:"M d, Y" }}</div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>

</div>

<script>
  document.getElementById("searchInput").addEventListener("input", function () {
    const searchTerm = this.value.toLowerCase();
    const cards = document.querySelectorAll("#readNowList .col");

    cards.forEach(card => {
      const title = card.querySelector(".card-title")?.innerText.toLowerCase() || "";
      const author = card.querySelector(".card-author")?.innerText.toLowerCase() || "";
      card.style.display = (title.includes(searchTerm) || author.includes(searchTerm)) ? "block" : "none";
    });
  });
</script>
{% endblock %}
